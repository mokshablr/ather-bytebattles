enable_language(C ASM)

###RTOS specific
#Add source folders
IF(${TARGET_PLATFORM_CORE} STREQUAL "CM0")
    AUX_SOURCE_DIRECTORY(${CMAKE_CURRENT_SOURCE_DIR}/ARMv6-M SRC)
ELSEIF(${TARGET_PLATFORM_CORE} STREQUAL "CM4")
    AUX_SOURCE_DIRECTORY(${CMAKE_CURRENT_SOURCE_DIR}/ARMv7-M SRC)
ENDIF()


#Add include paths
IF(${TARGET_PLATFORM_CORE} STREQUAL "CM0")
    SET(INC ${CMAKE_CURRENT_SOURCE_DIR}/ARMv6-M/GNU)
ELSEIF(${TARGET_PLATFORM_CORE} STREQUAL "CM4")
    SET(INC ${CMAKE_CURRENT_SOURCE_DIR}/ARMv7-M/GNU)
ENDIF()

#Add Assembly files
IF(${TARGET_PLATFORM_CORE} STREQUAL "CM0")
    file(GLOB ASM ARMv6-M/GNU/*.s)
ELSEIF(${TARGET_PLATFORM_CORE} STREQUAL "CM4")
    file(GLOB ASM ARMv7-M/GNU/*.s)
ENDIF()

SET(CPU_SRC ${SRC} PARENT_SCOPE)
SET(CPU_INC ${INC} PARENT_SCOPE)
SET(CPU_ASM ${ASM} PARENT_SCOPE)